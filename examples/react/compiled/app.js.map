{"version":3,"sources":["../js/app.jsx"],"names":["app","ALL_TODOS","ACTIVE_TODOS","COMPLETED_TODOS","TodoFooter","TodoItem","ENTER_KEY","TodoApp","React","createClass","getInitialState","nowShowing","editing","newTodo","componentDidMount","setState","router","Router","bind","init","handleChange","event","target","value","handleNewTodoKeyDown","keyCode","preventDefault","val","state","trim","props","model","addTodo","toggleAll","checked","evnt","toggle","todoToToggle","destroy","todo","edit","id","save","todoToSave","text","cancel","clearCompleted","render","footer","main","todos","shownTodos","filter","completed","todoItems","map","activeTodoCount","reduce","accum","completedCount","length","TodoModel","document","getElementsByClassName","subscribe"],"mappings":"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","file":"app.js","sourcesContent":["/*jshint quotmark:false */\n/*jshint white:false */\n/*jshint trailing:false */\n/*jshint newcap:false */\n/*global React, Router*/\nvar app = app || {};\n\n(function () {\n\t'use strict';\n\n\tapp.ALL_TODOS = 'all';\n\tapp.ACTIVE_TODOS = 'active';\n\tapp.COMPLETED_TODOS = 'completed';\n\tvar TodoFooter = app.TodoFooter;\n\tvar TodoItem = app.TodoItem;\n\n\tvar ENTER_KEY = 13;\n\n\tvar TodoApp = React.createClass({\n\t\tgetInitialState: function () {\n\t\t\treturn {\n\t\t\t\tnowShowing: app.ALL_TODOS,\n\t\t\t\tediting: null,\n\t\t\t\tnewTodo: ''\n\t\t\t};\n\t\t},\n\n\t\tcomponentDidMount: function () {\n\t\t\tvar setState = this.setState;\n\t\t\tvar router = Router({\n\t\t\t\t'/': setState.bind(this, {nowShowing: app.ALL_TODOS}),\n\t\t\t\t'/active': setState.bind(this, {nowShowing: app.ACTIVE_TODOS}),\n\t\t\t\t'/completed': setState.bind(this, {nowShowing: app.COMPLETED_TODOS})\n\t\t\t});\n\t\t\trouter.init('/');\n\t\t},\n\n\t\thandleChange: function (event) {\n\t\t\tthis.setState({newTodo: event.target.value});\n\t\t},\n\n\t\thandleNewTodoKeyDown: function (event) {\n\t\t\tif (event.keyCode !== ENTER_KEY) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar val = this.state.newTodo.trim();\n\n\t\t\tif (val) {\n\t\t\t\tthis.props.model.addTodo(val);\n\t\t\t\tthis.setState({newTodo: ''});\n\t\t\t}\n\t\t},\n\n\t\ttoggleAll: function (event) {\n\t\t\tvar checked = evnt.target.checked;\n\t\t\tthis.props.model.toggleAll(checked);\n\t\t},\n\n\t\ttoggle: function (todoToToggle) {\n\t\t\tthis.props.model.toggle(todoToToggle);\n\t\t},\n\n\t\tdestroy: function (todo) {\n\t\t\tthis.props.model.destroy(todo);\n\t\t},\n\n\t\tedit: function (todo) {\n\t\t\tthis.setState({editing: todo.id});\n\t\t},\n\n\t\tsave: function (todoToSave, text) {\n\t\t\tthis.props.model.save(todoToSave, text);\n\t\t\tthis.setState({editing: null});\n\t\t},\n\n\t\tcancel: function () {\n\t\t\tthis.setState({editing: null});\n\t\t},\n\n\t\tclearCompleted: function () {\n\t\t\tthis.props.model.clearCompleted();\n\t\t},\n\n\t\trender: function () {\n\t\t\tvar footer;\n\t\t\tvar main;\n\t\t\tvar todos = this.props.model.todos;\n\n\t\t\tvar shownTodos = todos.filter(function (todo) {\n\t\t\t\tswitch (this.state.nowShowing) {\n\t\t\t\tcase app.ACTIVE_TODOS:\n\t\t\t\t\treturn !todo.completed;\n\t\t\t\tcase app.COMPLETED_TODOS:\n\t\t\t\t\treturn todo.completed;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tvar todoItems = shownTodos.map(function (todo) {\n\t\t\t\treturn (\n\t\t\t\t\t<TodoItem\n\t\t\t\t\t\tkey={todo.id}\n\t\t\t\t\t\ttodo={todo}\n\t\t\t\t\t\tonToggle={this.toggle.bind(this, todo)}\n\t\t\t\t\t\tonDestroy={this.destroy.bind(this, todo)}\n\t\t\t\t\t\tonEdit={this.edit.bind(this, todo)}\n\t\t\t\t\t\tediting={this.state.editing === todo.id}\n\t\t\t\t\t\tonSave={this.save.bind(this, todo)}\n\t\t\t\t\t\tonCancel={this.cancel}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}, this);\n\n\t\t\tvar activeTodoCount = todos.reduce(function (accum, todo) {\n\t\t\t\treturn todo.completed ? accum : accum + 1;\n\t\t\t}, 0);\n\n\t\t\tvar completedCount = todos.length - activeTodoCount;\n\n\t\t\tif (activeTodoCount || completedCount) {\n\t\t\t\tfooter =\n\t\t\t\t\t<TodoFooter\n\t\t\t\t\t\tcount={activeTodoCount}\n\t\t\t\t\t\tcompletedCount={completedCount}\n\t\t\t\t\t\tnowShowing={this.state.nowShowing}\n\t\t\t\t\t\tonClearCompleted={this.clearCompleted}\n\t\t\t\t\t/>;\n\t\t\t}\n\n\t\t\tif (todos.length) {\n\t\t\t\tmain = (\n\t\t\t\t\t<section className=\"main\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"toggle-all\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={this.toggleAll}\n\t\t\t\t\t\t\tchecked={activeTodoCount === 0}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ul className=\"todo-list\">\n\t\t\t\t\t\t\t{todoItems}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</section>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<header className=\"header\">\n\t\t\t\t\t\t<h1>todos</h1>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"new-todo\"\n\t\t\t\t\t\t\tplaceholder=\"What needs to be done?\"\n\t\t\t\t\t\t\tvalue={this.state.newTodo}\n\t\t\t\t\t\t\tonKeyDown={this.handleNewTodoKeyDown}\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</header>\n\t\t\t\t\t{main}\n\t\t\t\t\t{footer}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t});\n\n\tvar model = new app.TodoModel('react-todos');\n\n\tfunction render() {\n\t\tReact.render(\n\t\t\t<TodoApp model={model}/>,\n\t\t\tdocument.getElementsByClassName('todoapp')[0]\n\t\t);\n\t}\n\n\tmodel.subscribe(render);\n\trender();\n})();\n"]}